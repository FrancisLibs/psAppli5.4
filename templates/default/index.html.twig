{% extends 'base.html.twig' %}

{% block title %}Gmao PS Bienvenue ! !
{% endblock %}

{% block stylesheets %}
	{{ parent() }}
	<link rel="stylesheet" href="/assets/css/style-base.css">
{% endblock %}

{% block body %}
	<div class="mainBlock">
		<div class="firstColumn">
			<div class="upperBlock">
				<h1 class="firstColumnTitle">Maintenance PS</h1>
				<img class="logoSchmidt" src="{{ asset('images/logo.png') }}" alt="Charcuterie Pierre Schmidt">
			</div>
			<div class="letsGoBtnBlock lowerBlock">
				<a class="btn btn-default" href="{{ path('part_index') }}">Let's go !</a>
				<div id="infoFrame">
					<div class="text-center default-title">
						<h2>Infos :</h2>
					</div>
					<div class="items-info">
						<span>Bt préventifs en retard :
							{{ lateBT }}
						</span>
						<span class="items-info-max">(max : 10)</span>
					</div>
					<div class="items-info">
						<span>Pièces à commander :
							{{ partsToBuy }}
						</span>
						<span class="items-info-max">(max : 20)</span>
					</div>
				</div>
			</div>
		</div>
		<div class="secondColumn">
			<h2 class="secondColumnTitle">The Team</h2>
			<div class="pictures">
				{% for user in users %}
					{% if 'ROLE_SUPER' not in user.roles %}
						<div class="eachPicture">
							{% if user.imageName %}
								<a href="{{ path('user_profil', {'id': user.id}) }}">
									<img class="pictureSize" src="{{ vich_uploader_asset(user, 'imageFile') | imagine_filter('my_default_filter') }}" alt="Photo d'identité de {{ user.username }}"/></a>
							{% else %}
								<a href="{{ path('user_profil', {'id': user.id}) }}">
									<img class="pictureSize" src="{{ asset('/images/technicien.jpg') | imagine_filter('my_default_filter') }}" alt="Photo d'identité de {{ user.username }}"/></a>
							{% endif %}
							<p class="pictureTextSize">{{ user.firstName ~ " " ~ user.lastName }}</p>
						</div>
					{% endif %}
				{% endfor %}
			</div>
		</div>
	</div>
{% endblock %}
{% block javascripts %}
	{{ parent() }}
	<script src="/assets/js/infosHomePage.js" defer></script>
	<script>
		// Définir les variables lateBT pour le script
var nbOfLateBT = {{ lateBT }};
var partsToBuy = {{ partsToBuy }};
	</script>
{% endblock %}
